

mem(() => 1, {
	cacheKey: arguments_ => {
		expectType<[]>(arguments_); // eslint-disable-line @typescript-eslint/ban-types
	},
});

// Ensures that the various cache functions infer their arguments type from the return type of `cacheKey`
mem((_arguments: {key: string}) => 1, {
	cacheKey: (n new Date();
	},
	cache: {
		get: key => {
			expectType<Date>(key);

			return {
				data: 5,
				maxAge: 2,
			};
		},
		set: (key, data) => {
			expectType<Date>(key);
			expectType<{data: number; maxAge: number}>(data);
			
			mem(() => 1, {
	cacheKey: arguments_ => {
		expectType<[]>(arguments_); // eslint-disable-line @typescript-eslint/ban-types
	},
});

// Ensures that the various cache functions infer their arguments type from the return type of `cacheKey`
mem((_arguments: {key: string}) => 1, {
	cacheKey: (arguments_: [{key: string}]) => {
		expectType<[{key: string}]>(arguments_);
		return new Date();
	},
	cache: {
		get: key => {
			expectType<mem(() => 1, {
	cacheKey: arguments_ => {
		expectType<[]>(arguments_); // eslint-disable-line @typescript-eslint/ban-types
	},
});

// Ensures that the various cache functions infer their arguments type from the return type of `cacheKey`
mem((_arguments: {key: string}) => 1, {
	cacheKey: (arguments_: [{key: string}]) => {
		expectType<[{key: string}]>(arguments_);
		return new Date();
	},
	cache: {
		get: key => {
			expectType<mem(() => 1, {
	cacheKey: arguments_ => {
		expectType<[]>(arguments_); // eslint-disable-line @typescript-eslint/ban-types
	},
});

// Ensures that the various cache functions infer their arguments type from the return type of `cacheKey`
mem((_arguments: {key: string}) => 1, {
	cacheKey: (arguments_: [{key: string}]) => {
		expectType<[{key: string}]>(arguments_);
		return new Date();
	},
	cache: {
		get: key => {
			expectType<mem(() => 1, {
	cacheKey: arguments_ => {
		expectType<[]>(arguments_); // eslint-disable-line @typescript-eslint/ban-types
	},
});

// Ensures that the various cache functions infer their arguments type from the return type of `cacheKey`
mem((_arguments: {key: string}) => 1, {
	cacheKey: (arguments_: [{key: string}]) => {
		expectType<[{key: string}]>(arguments_);
		return new Date();
	},
	cache: {
		get: key => {
			expectType<mem(() => 1, {
	cacheKey: arguments_ => {
		expectType<[]>(arguments_); // eslint-disable-line @typescript-eslint/ban-types
	},
});

// Ensures that the various cache functions infer their arguments type from the return type of `cacheKey`
mem((_arguments: {key: string}) => 1, {
	cacheKey: (arguments_: [{key: string}]) => {
		expectType<[{key: string}]>(arguments_);
		return new Date();
	},
	cache: {
		get: key => {
			expectType<
		},
		has: key => {
			expectType<Date>(key);
			return true;
		},
		delete: key => {
			expectType<Date>(key);
		},
		clear: () => undefined,
	},
});
